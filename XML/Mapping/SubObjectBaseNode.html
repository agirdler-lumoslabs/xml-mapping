<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class XML::Mapping::SubObjectBaseNode - XML::Mapping -- Simple, extensible Ruby-to-XML (and back) mapper</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="SingleAttributeNode.html">XML::Mapping::SingleAttributeNode</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-XML::Mapping::SubObjectBaseNode">
  <h1 id="class-XML::Mapping::SubObjectBaseNode" class="class">
    class XML::Mapping::SubObjectBaseNode
  </h1>

  <section class="description">
    
<p>(does somebody have a better name for this class?) base node class that
provides an initializer which lets the user specify a means to
marshal/unmarshal a Ruby object to/from <a href="../../XML.html">XML</a>.
Used as the base class for nodes that map some sub-nodes of their <a
href="../../XML.html">XML</a> tree to (Ruby-)sub-objects of their
attribute.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>processes the keyword arguments :class, :marshaller, and :unmarshaller
(<em>args</em> is ignored). When this initiaizer returns, @marshaller and
@unmarshaller are set to procs that marshal/unmarshal a Ruby object to/from
an <a href="../../XML.html">XML</a> tree according to the keyword arguments
that were passed to the initializer:</p>

<p>You either supply a :class argument with a class implementing XML::Mapping
â€“ in that case, the subtree will be mapped to an instance of that class
(using load_from_xml resp. fill_into_xml). Or, you supply :marshaller and
:unmarshaller arguments specifying explicit unmarshaller/marshaller procs.
The :marshaller proc takes arguments <em>xml</em>,<em>value</em> and must
fill <em>value</em> (the object to be marshalled) into <em>xml</em>; the
:unmarshaller proc takes <em>xml</em> and must extract and return the
object value from it. Or, you specify none of those arguments, in which
case the name of the class to create will be automatically deduced from the
root element name of the <a href="../../XML.html">XML</a> node (see <a
href="../Mapping.html#method-c-load_object_from_xml">XML::Mapping.load_object_from_xml</a>,
<a
href="../Mapping.html#method-c-class_for_root_elt_name">XML::Mapping.class_for_root_elt_name</a>).</p>

<p>If both :class and :marshaller/:unmarshaller arguments are supplied, the
latter take precedence.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              <a href="SingleAttributeNode.html#method-c-new">XML::Mapping::SingleAttributeNode.new</a>
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/standard_nodes.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">args</span> = <span class="ruby-keyword">super</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)

  <span class="ruby-ivar">@sub_mapping</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:sub_mapping</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@mapping</span>
  <span class="ruby-ivar">@marshaller</span>, <span class="ruby-ivar">@unmarshaller</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:marshaller</span>], <span class="ruby-ivar">@options</span>[<span class="ruby-value">:unmarshaller</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:class</span>]
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@marshaller</span>
      <span class="ruby-ivar">@marshaller</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">xml</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">value</span>.<span class="ruby-identifier">fill_into_xml</span> <span class="ruby-identifier">xml</span>, <span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@sub_mapping</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">unspecified?</span>
          <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">root_element_name</span> <span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@sub_mapping</span>
          <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">unspecified</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>
      }
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@unmarshaller</span>
      <span class="ruby-ivar">@unmarshaller</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
        <span class="ruby-ivar">@options</span>[<span class="ruby-value">:class</span>].<span class="ruby-identifier">load_from_xml</span> <span class="ruby-identifier">xml</span>, <span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@sub_mapping</span>
      }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@marshaller</span>
    <span class="ruby-ivar">@marshaller</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">xml</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">value</span>.<span class="ruby-identifier">fill_into_xml</span> <span class="ruby-identifier">xml</span>, <span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@sub_mapping</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">unspecified?</span>
        <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">value</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">root_element_name</span> <span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@sub_mapping</span>
        <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">unspecified</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    }
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@unmarshaller</span>
    <span class="ruby-ivar">@unmarshaller</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
      <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">load_object_from_xml</span> <span class="ruby-identifier">xml</span>, <span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@sub_mapping</span>
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">args</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

