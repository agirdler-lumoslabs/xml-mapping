<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class XML::Mapping::Node - XML::Mapping -- Simple, extensible Ruby-to-XML (and back) mapper</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-default_obj_to_xml">::default_obj_to_xml</a>
    
    <li ><a href="#method-c-default_xml_to_obj">::default_xml_to_obj</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-c-obj_to_xml">::obj_to_xml</a>
    
    <li ><a href="#method-c-xml_to_obj">::xml_to_obj</a>
    
    <li ><a href="#method-i-is_present_in-3F">#is_present_in?</a>
    
    <li ><a href="#method-i-obj_initializing">#obj_initializing</a>
    
    <li ><a href="#method-i-obj_to_xml">#obj_to_xml</a>
    
    <li ><a href="#method-i-xml_to_obj">#xml_to_obj</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-XML::Mapping::Node">
  <h1 id="class-XML::Mapping::Node" class="class">
    class XML::Mapping::Node
  </h1>

  <section class="description">
    
<p>Abstract base class for all node types. As mentioned in the documentation
for <a href="../Mapping.html">XML::Mapping</a>, node types must be
registered using <a
href="../Mapping.html#method-c-add_node_class">XML::Mapping.add_node_class</a>,
and a corresponding “node factory method” (e.g. “text_node”) will then be
added as a class method to your mapping classes. The node factory method is
called from the body of the mapping classes as demonstrated in the
examples. It creates an instance of its corresponding node type (the list
of parameters to the node factory method, preceded by the owning mapping
class, will be passed to the constructor of the node type) and adds it to
its owning mapping class, so there is one node object per node definition
per mapping class. That node object will handle all <a
href="../../XML.html">XML</a> marshalling/unmarshalling for this node, for
all instances of the mapping class. For this purpose, the marshalling and
unmarshalling methods of a mapping class instance (fill_into_xml and
fill_from_xml, respectively) will call <a
href="Node.html#method-c-obj_to_xml">::obj_to_xml</a> resp. <a
href="Node.html#method-c-xml_to_obj">::xml_to_obj</a> on all nodes of the
mapping class, in the order of their definition, passing the <a
href="../../REXML.html">REXML</a> element the data is to be marshalled
to/unmarshalled from as well as the object the data is to be read
from/filled into.</p>

<p><a href="Node.html">Node</a> types that map some <a
href="../../XML.html">XML</a> data to a single attribute of their mapping
class (that should be most of them) shouldn&#39;t be directly derived from
this class, but rather from <a
href="SingleAttributeNode.html">SingleAttributeNode</a>.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-default_obj_to_xml" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">default_obj_to_xml</span><span
            class="method-args">(obj,xml)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-c-obj_to_xml">obj_to_xml</a>
        </div>
        
      </div>

    
      <div id="method-c-default_xml_to_obj" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">default_xml_to_obj</span><span
            class="method-args">(obj,xml)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-c-xml_to_obj">xml_to_obj</a>
        </div>
        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(owner,*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Intializer, to be called from descendant classes. <em>owner</em> is the
mapping class this node is being defined in. It&#39;ll be stored in
_@owner_. @options will be set to a (possibly empty) hash containing the
option arguments passed to <em>initialize</em>. Options :mapping, :reader
and :writer will be handled, subclasses may handle additional options. See
the section on defining nodes in the <a
href="../../README_md.html">README</a> for details.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 550</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">owner</span>,<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-ivar">@owner</span> = <span class="ruby-identifier">owner</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Hash</span><span class="ruby-operator">===</span><span class="ruby-identifier">args</span>[<span class="ruby-value">-1</span>]
    <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">-1</span>]
    <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@options</span>={}
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@mapping</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-value">:mapping</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">owner</span>.<span class="ruby-identifier">default_mapping</span>
  <span class="ruby-identifier">owner</span>.<span class="ruby-identifier">xml_mapping_nodes</span>(<span class="ruby-value">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@mapping</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
  <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes_by_rootelt_names</span>.<span class="ruby-identifier">ensure_exists</span> <span class="ruby-identifier">owner</span>.<span class="ruby-identifier">root_element_name</span>, <span class="ruby-ivar">@mapping</span>, <span class="ruby-identifier">owner</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:reader</span>]
    <span class="ruby-comment"># override xml_to_obj in this instance with invocation of</span>
    <span class="ruby-comment"># @options[:reader]</span>
    <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
      <span class="ruby-identifier">alias_method</span> <span class="ruby-value">:default_xml_to_obj</span>, <span class="ruby-value">:xml_to_obj</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">xml_to_obj</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
        <span class="ruby-keyword">begin</span>
          <span class="ruby-ivar">@options</span>[<span class="ruby-value">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:default_xml_to_obj</span>))
        <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ArgumentError</span>  <span class="ruby-comment"># thrown if @options[:reader] is a lambda (i.e. no Proc) with !=3 args (e.g. proc{...} in ruby1.8)</span>
          <span class="ruby-ivar">@options</span>[<span class="ruby-value">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:writer</span>]
    <span class="ruby-comment"># override obj_to_xml in this instance with invocation of</span>
    <span class="ruby-comment"># @options[:writer]</span>
    <span class="ruby-keyword">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
      <span class="ruby-identifier">alias_method</span> <span class="ruby-value">:default_obj_to_xml</span>, <span class="ruby-value">:obj_to_xml</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">obj_to_xml</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
        <span class="ruby-keyword">begin</span>
          <span class="ruby-ivar">@options</span>[<span class="ruby-value">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:default_obj_to_xml</span>))
        <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-comment"># thrown if (see above)</span>
          <span class="ruby-ivar">@options</span>[<span class="ruby-value">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">args</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-obj_to_xml" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">obj_to_xml</span><span
            class="method-args">(obj,xml)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="obj_to_xml-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 580</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">obj_to_xml</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:default_obj_to_xml</span>))
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-comment"># thrown if (see above)</span>
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Node.html#method-c-default_obj_to_xml">default_obj_to_xml</a>
        </div>
        

        
      </div>

    
      <div id="method-c-xml_to_obj" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">xml_to_obj</span><span
            class="method-args">(obj,xml)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="xml_to_obj-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 566</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">xml_to_obj</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
  <span class="ruby-keyword">begin</span>
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-value">:default_xml_to_obj</span>))
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">ArgumentError</span>  <span class="ruby-comment"># thrown if @options[:reader] is a lambda (i.e. no Proc) with !=3 args (e.g. proc{...} in ruby1.8)</span>
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Node.html#method-c-default_xml_to_obj">default_xml_to_obj</a>
        </div>
        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-is_present_in-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_present_in?</span><span
            class="method-args">(obj)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>tell whether this node&#39;s data is present in <em>obj</em> (when this
method is called, <em>obj</em> will be an instance of the mapping class
this node was defined in). This method is currently used only by <a
href="ChoiceNode.html">ChoiceNode</a> when writing data back to <a
href="../../XML.html">XML</a>. See <a
href="ChoiceNode.html#method-i-obj_to_xml">XML::Mapping::ChoiceNode#obj_to_xml</a>.</p>
          
          

          
          <div class="method-source-code" id="is_present_in-3F-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 629</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_present_in?</span> <span class="ruby-identifier">obj</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-obj_initializing" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">obj_initializing</span><span
            class="method-args">(obj,mapping)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Called when a new instance of the mapping class this node belongs to is
being initialized. <em>obj</em> is the instance. <em>mapping</em> is the
mapping the initialization is happening with, if any: If the instance is
being initialized as part of e.g. <code>Class.load_from_file(name,
:mapping=&gt;:some_mapping</code> or any other call that specifies a
mapping, that mapping will be passed to this method. If the instance is
being initialized normally with <code>Class.new</code>, <em>mapping</em> is
nil here.</p>

<p>You may set up initial values for the attributes this node is responsible
for here. Default implementation is empty.</p>
          
          

          
          <div class="method-source-code" id="obj_initializing-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 622</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">obj_initializing</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">mapping</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-obj_to_xml" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">obj_to_xml</span><span
            class="method-args">(obj,xml)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This is called by the <a href="../../XML.html">XML</a> unmarshalling
machinery when the state of an instance of this node&#39;s @owner is to be
stored into an <a href="../../XML.html">XML</a> tree. <em>obj</em> is the
instance, <em>xml</em> is the tree (a <a
href="../../REXML/Element.html">REXML::Element</a>). The node must extract
“its” data from <em>obj</em> and store it to the corresponding parts
(sub-elements, attributes etc.) of <em>xml</em> (using <a
href="../XXPath.html">XML::XXPath</a> or any other means).</p>
          
          

          
          <div class="method-source-code" id="obj_to_xml-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 607</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">obj_to_xml</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;abstract method called&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-xml_to_obj" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">xml_to_obj</span><span
            class="method-args">(obj,xml)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This is called by the <a href="../../XML.html">XML</a> unmarshalling
machinery when the state of an instance of this node&#39;s @owner is to be
read from an <a href="../../XML.html">XML</a> tree. <em>obj</em> is the
instance, <em>xml</em> is the tree (a <a
href="../../REXML/Element.html">REXML::Element</a>). The node must read
“its” data from <em>xml</em> (using <a
href="../XXPath.html">XML::XXPath</a> or any other means) and store it to
the corresponding parts (attributes etc.) of <em>obj</em>&#39;s state.</p>
          
          

          
          <div class="method-source-code" id="xml_to_obj-source">
            <pre><span class="ruby-comment"># File lib/xml/mapping/base.rb, line 597</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">xml_to_obj</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;abstract method called&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

