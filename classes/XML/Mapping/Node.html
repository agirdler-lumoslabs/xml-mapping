<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: XML::Mapping::Node</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">XML::Mapping::Node</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/xml/mapping/base_rb.html">
                lib/xml/mapping/base.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Abstract base class for all node types. As mentioned in the documentation
for <a href="../Mapping.html">XML::Mapping</a>, node types must be
registered using <a
href="../Mapping.html#M000026">XML::Mapping.add_node_class</a>, and a
corresponding &quot;node factory method&quot; (e.g. &quot;text_node&quot;)
will then be added as a class method to your mapping classes. The node
factory method is called from the body of the mapping classes as
demonstrated in the examples. It creates an instance of its corresponding
node type (the list of parameters to the node factory method, preceded by
the owning mapping class, will be passed to the constructor of the node
type) and adds it to its owning mapping class, so there is one node object
per node definition per mapping class. That node object will handle all <a
href="../../XML.html">XML</a> marshalling/unmarshalling for this node, for
all instances of the mapping class. For this purpose, the marshalling and
unmarshalling methods of a mapping class instance (fill_into_xml and
fill_from_xml, respectively) will call <a
href="Node.html#M000045">obj_to_xml</a> resp. <a
href="Node.html#M000044">xml_to_obj</a> on all nodes of the mapping class,
in the order of their definition, passing the <a
href="../../REXML.html">REXML</a> element the data is to be marshalled
to/unmarshalled from as well as the object the data is to be read
from/filled into.
</p>
<p>
<a href="Node.html">Node</a> types that map some <a
href="../../XML.html">XML</a> data to a single attribute of their mapping
class (that should be most of them) shouldn&#8217;t be directly derived
from this class, but rather from <a
href="SingleAttributeNode.html">SingleAttributeNode</a>.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000049">is_present_in?</a>&nbsp;&nbsp;
      <a href="#M000043">new</a>&nbsp;&nbsp;
      <a href="#M000048">obj_initializing</a>&nbsp;&nbsp;
      <a href="#M000045">obj_to_xml</a>&nbsp;&nbsp;
      <a href="#M000047">obj_to_xml</a>&nbsp;&nbsp;
      <a href="#M000044">xml_to_obj</a>&nbsp;&nbsp;
      <a href="#M000046">xml_to_obj</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">



    <div id="aliases-list">
      <h3 class="section-bar">External Aliases</h3>

      <div class="name-list">
                        <table summary="aliases">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">xml_to_obj</td>
          <td>-></td>
          <td class="context-item-value">default_xml_to_obj</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">obj_to_xml</td>
          <td>-></td>
          <td class="context-item-value">default_obj_to_xml</td>
        </tr>
                        </table>
      </div>
    </div>


      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000043" class="method-detail">
        <a name="M000043"></a>

        <div class="method-heading">
          <a href="#M000043" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(owner,*args)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Intializer, to be called from descendant classes. <em>owner</em> is the
mapping class this node is being defined in. It&#8216;ll be stored in
_@owner_. @options will be set to a (possibly empty) hash containing the
option arguments passed to <em>initialize</em>. Options :mapping, :reader
and :writer will be handled, subclasses may handle additional options. See
the section on defining nodes in the README for details.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000043-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000043-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 501</span>
501:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">owner</span>,<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
502:         <span class="ruby-ivar">@owner</span> = <span class="ruby-identifier">owner</span>
503:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Hash</span><span class="ruby-operator">===</span><span class="ruby-identifier">args</span>[<span class="ruby-value">-1</span>]
504:           <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">-1</span>]
505:           <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>]
506:         <span class="ruby-keyword kw">else</span>
507:           <span class="ruby-ivar">@options</span>={}
508:         <span class="ruby-keyword kw">end</span>
509:         <span class="ruby-ivar">@mapping</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:mapping</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">owner</span>.<span class="ruby-identifier">default_mapping</span>
510:         <span class="ruby-identifier">owner</span>.<span class="ruby-identifier">xml_mapping_nodes</span>(<span class="ruby-identifier">:mapping=</span><span class="ruby-operator">&gt;</span><span class="ruby-ivar">@mapping</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>
511:         <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Mapping</span><span class="ruby-operator">::</span><span class="ruby-constant">Classes_by_rootelt_names</span>.<span class="ruby-identifier">ensure_exists</span> <span class="ruby-identifier">owner</span>.<span class="ruby-identifier">root_element_name</span>, <span class="ruby-ivar">@mapping</span>, <span class="ruby-identifier">owner</span>
512:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:reader</span>]
513:           <span class="ruby-comment cmt"># override xml_to_obj in this instance with invocation of</span>
514:           <span class="ruby-comment cmt"># @options[:reader]</span>
515:           <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>
516:             <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:default_xml_to_obj</span>, <span class="ruby-identifier">:xml_to_obj</span>
517:             <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">xml_to_obj</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
518:               <span class="ruby-keyword kw">begin</span>
519:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
520:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
521:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-identifier">:default_xml_to_obj</span>))
522:               <span class="ruby-keyword kw">end</span>
523:             <span class="ruby-keyword kw">end</span>
524:           <span class="ruby-keyword kw">end</span>
525:         <span class="ruby-keyword kw">end</span>
526:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:writer</span>]
527:           <span class="ruby-comment cmt"># override obj_to_xml in this instance with invocation of</span>
528:           <span class="ruby-comment cmt"># @options[:writer]</span>
529:           <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>
530:             <span class="ruby-identifier">alias_method</span> <span class="ruby-identifier">:default_obj_to_xml</span>, <span class="ruby-identifier">:obj_to_xml</span>
531:             <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj_to_xml</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
532:               <span class="ruby-keyword kw">begin</span>
533:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
534:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
535:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-identifier">:default_obj_to_xml</span>))
536:               <span class="ruby-keyword kw">end</span>
537:             <span class="ruby-keyword kw">end</span>
538:           <span class="ruby-keyword kw">end</span>
539:         <span class="ruby-keyword kw">end</span>
540:         <span class="ruby-identifier">args</span>
541:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000045" class="method-detail">
        <a name="M000045"></a>

        <div class="method-heading">
          <a href="#M000045" class="method-signature">
          <span class="method-name">obj_to_xml</span><span class="method-args">(obj,xml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000045-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000045-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 531</span>
531:             <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj_to_xml</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
532:               <span class="ruby-keyword kw">begin</span>
533:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
534:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
535:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:writer</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-identifier">:default_obj_to_xml</span>))
536:               <span class="ruby-keyword kw">end</span>
537:             <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000044" class="method-detail">
        <a name="M000044"></a>

        <div class="method-heading">
          <a href="#M000044" class="method-signature">
          <span class="method-name">xml_to_obj</span><span class="method-args">(obj,xml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000044-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000044-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 517</span>
517:             <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">xml_to_obj</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
518:               <span class="ruby-keyword kw">begin</span>
519:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
520:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
521:                 <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:reader</span>].<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>,<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">method</span>(<span class="ruby-identifier">:default_xml_to_obj</span>))
522:               <span class="ruby-keyword kw">end</span>
523:             <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000049" class="method-detail">
        <a name="M000049"></a>

        <div class="method-heading">
          <a href="#M000049" class="method-signature">
          <span class="method-name">is_present_in?</span><span class="method-args">(obj)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
tell whether this node&#8217;s data is present in <em>obj</em> (when this
method is called, <em>obj</em> will be an instance of the mapping class
this node was defined in). This method is currently used only by <a
href="ChoiceNode.html">ChoiceNode</a> when writing data back to <a
href="../../XML.html">XML</a>. See <a
href="ChoiceNode.html#M000052">ChoiceNode#obj_to_xml</a>.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000049-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000049-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">is_present_in?</span> <span class="ruby-identifier">obj</span>
581:         <span class="ruby-keyword kw">true</span>
582:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000048" class="method-detail">
        <a name="M000048"></a>

        <div class="method-heading">
          <a href="#M000048" class="method-signature">
          <span class="method-name">obj_initializing</span><span class="method-args">(obj,mapping)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Called when a new instance of the mapping class this node belongs to is
being initialized. <em>obj</em> is the instance. <em>mapping</em> is the
mapping the initialization is happening with, if any: If the instance is
being initialized as part of e.g. <tt>Class.load_from_file(name,
:mapping=&gt;:some_mapping</tt> or any other call that specifies a mapping,
that mapping will be passed to this method. If the instance is being
initialized normally with <tt>Class.new</tt>, <em>mapping</em> is nil here.
</p>
<p>
You may set up initial values for the attributes this node is responsible
for here. Default implementation is empty.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000048-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000048-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 573</span>
573:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj_initializing</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">mapping</span>)
574:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000047" class="method-detail">
        <a name="M000047"></a>

        <div class="method-heading">
          <a href="#M000047" class="method-signature">
          <span class="method-name">obj_to_xml</span><span class="method-args">(obj,xml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is called by the <a href="../../XML.html">XML</a> unmarshalling
machinery when the state of an instance of this node&#8217;s @owner is to
be stored into an <a href="../../XML.html">XML</a> tree. <em>obj</em> is
the instance, <em>xml</em> is the tree (a REXML::Element). The node must
extract &quot;its&quot; data from <em>obj</em> and store it to the
corresponding parts (sub-elements, attributes etc.) of <em>xml</em> (using
<a href="../XXPath.html">XML::XXPath</a> or any other means).
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000047-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000047-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 558</span>
558:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj_to_xml</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
559:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;abstract method called&quot;</span>
560:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000046" class="method-detail">
        <a name="M000046"></a>

        <div class="method-heading">
          <a href="#M000046" class="method-signature">
          <span class="method-name">xml_to_obj</span><span class="method-args">(obj,xml)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This is called by the <a href="../../XML.html">XML</a> unmarshalling
machinery when the state of an instance of this node&#8217;s @owner is to
be read from an <a href="../../XML.html">XML</a> tree. <em>obj</em> is the
instance, <em>xml</em> is the tree (a REXML::Element). The node must read
&quot;its&quot; data from <em>xml</em> (using <a
href="../XXPath.html">XML::XXPath</a> or any other means) and store it to
the corresponding parts (attributes etc.) of <em>obj</em>&#8217;s state.
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000046-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000046-source">
<pre>
     <span class="ruby-comment cmt"># File lib/xml/mapping/base.rb, line 548</span>
548:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">xml_to_obj</span>(<span class="ruby-identifier">obj</span>,<span class="ruby-identifier">xml</span>)
549:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;abstract method called&quot;</span>
550:       <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>